---
import BaseLayout from "../../layouts/Layout.astro";
import { supabase } from "../../lib/supabaseClient";

const { data: categories = [], error } = await supabase
  .from("categories")
  .select("id, name")
  .order("name", { ascending: true });
if (error) console.error("Error cargando categorías:", error);
---

<BaseLayout title="Categorías">
  <section class="max-w-4xl mt-8 mx-auto py-12 px-4">
    <h1 class="text-3xl font-bold mb-6">Categorías</h1>
    {
      error ? (
        <p class="text-red-600">No pudimos cargar las categorías.</p>
      ) : (
        <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
          {categories?.map((cat) => (
            <li>
              <a
                href={`/categorias/${cat.id}`}
                class="block p-4 bg-white rounded shadow hover:bg-gray-50"
              >
                {cat.name}
              </a>
            </li>
          ))}
        </ul>
      )
    }
  </section>
</BaseLayout>
